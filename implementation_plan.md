# 実装計画 - Phase 1: MVP

# 目標
「Streamer Link Portal」の基盤を構築する。配信者がログインし、リンクを手動追加（OGP対応）でき、ファンが一元化されたリストを閲覧できる状態を目指す。「完全サーバーレス & 低コスト」アーキテクチャの実証を行う。

## ユーザー確認事項
> [!IMPORTANT]
> **Supabase プロジェクトのセットアップ**: 
> 無料の Supabase プロジェクトを作成し、`NEXT_PUBLIC_SUPABASE_URL` と `NEXT_PUBLIC_SUPABASE_ANON_KEY` を取得・設定する必要があります。

## 変更内容

### 1. プロジェクト初期化
#### [新規] Next.js セットアップ
- Next.js 14+ (App Router) の初期化。
- 必要なライブラリのインストール: `@supabase/supabase-js`, `cheerio` (OGP取得用), `lucide-react` (アイコン)。

### 2. データベース & 認証 (Supabase)
#### [新規] Supabase 構成
- `utils/supabase/client.ts`, `server.ts` (Cookieベース認証ヘルパー) の作成。
- `profiles` テーブルと `items` テーブルの SQL マイグレーションファイル作成 (RLSポリシー含む)。
    - **RLS (行レベルセキュリティ) ポリシー**:
        - `profiles`: 閲覧は誰でも可 (public), 更新は本人のみ。
        - `items`: 閲覧は誰でも可 (public), 追加/更新/削除は本人のみ。

### 3. コア機能 (フロントエンド)
#### [新規] 管理ダッシュボード (`/admin`)
- 認証保護されたルート。
- URL入力フォーム。
- Server Action: `fetchOGP(url)` -> タイトルと画像を外部サイトから取得。
- 「保存」ボタン -> `items` テーブルへインサート。

#### [新規] 公開ページ (`/[username]`)
- 配信者ごとの公開ページ用ダイナミックルート。
- `generateStaticParams` で既知のプロフィールを静的生成。
- **ISR**: `revalidate = 60` (1分間キャッシュ)。
- `Upcoming`, `Live`, `Archive` に分類してアイテムリストを表示。

## 検証計画

### 自動テスト
- Phase 1 (MVP) では開発速度優先のため実装しない。

### 手動検証手順
1.  **認証**: Googleアカウントまたはメールでログインできるか。
2.  **アイテム追加**: YouTube動画のURLを入力し、タイトルと画像が自動取得されるか。保存できるか。
3.  **公開ページ確認**: シークレットウィンドウ（ゲスト状態）で公開ページを開き、アイテムが表示されるか。
4.  **ディープリンク**: スマホ/PCでアイテムをクリックし、適切にアプリ/サイトが開くか。
5.  **コスト確認**: 公開ページを10回リロードし、無駄なDBリクエストが発生していないか (Vercel Cacheが効いているか) 確認。
